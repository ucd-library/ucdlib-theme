import { LitElement } from 'lit';
import {render, styles} from "./ucd-theme-message-area.tpl.js";

/**
 * @class UcdThemeMessageArea
 * @classdesc UI component class for displaying a dismissable message panel
 * Pattern Lab Url: http://dev.webstyleguide.ucdavis.edu/redesign/?p=molecules-message-area
 * 
 * @property {String} title - The message panel header
 * @property {String} buttonText - The text of the dismiss button (is hidden)
 * @property {Boolean} collapsed - Whether or not the panel content is visible
 * 
 * @example
 * html`
 *   <ucd-theme-message-area title='Your message panel header'>
 *    Your content goes here.
 *   </ucd-theme-message-area>
 * `
 */
export default class UcdThemeMessageArea extends LitElement {

  static get properties() {
    return {
      title : {type: String},
      buttonText : {type: String, attribute: 'button-text'},
      collapsed : {type: Boolean, reflect: true}
    };
  }

  static get styles() {
    return styles();
  }

  constructor() {
    super();
    this.render = render.bind(this);
    this.collapsed = false;
  }

  /**
   * @method _onBtnClicked
   * @description Attached to dismiss button in upper-right corner.
   */
  _onBtnClicked() {
    this.collapsed = !this.collapsed;
    this._dispatchToggleEvent();
  }

  /**
   * @method _dispatchToggleEvent
   * @description Dispatches 'accordion-toggle' custom event when user toggles panel content visibility.
   */
  _dispatchToggleEvent(){
    let e = new CustomEvent('accordion-toggle', {
      detail: { 
        message: 'Message area content has been expanded or collapsed', 
        isCollapsed: this.collapsed
      },
      bubbles: true,
      composed: true });
    this.dispatchEvent(e);
  }

}

customElements.define('ucd-theme-message-area', UcdThemeMessageArea);